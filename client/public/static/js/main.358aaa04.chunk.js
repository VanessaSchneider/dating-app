(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{22:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(14),r=n.n(s),i=(n(22),n(2)),a=n(0);var l=function(e){var t=e.onLogin,n=(e.fetchProfiles,Object(c.useState)(!1)),s=Object(i.a)(n,2),r=s[0],l=s[1],o=Object(c.useState)(""),u=Object(i.a)(o,2),j=u[0],b=u[1],d=Object(c.useState)(""),h=Object(i.a)(d,2),O=h[0],f=h[1],m=Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:Object(a.jsx)("form",{onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:j,password:O})}).then((function(e){return e.json()})).then((function(e){return e.username?t(e):alert(e.error)})),b(""),f("")},children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"mb-3"}),Object(a.jsx)("input",{type:"text",value:j,onChange:function(e){return b(e.target.value)},placeholder:"Username"}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:O,onChange:function(e){return f(e.target.value)},placeholder:"Password"})}),Object(a.jsx)("input",{type:"submit",className:"btn btn-outline-light"})]})})})});return Object(a.jsx)("div",{children:Object(a.jsxs)("nav",{children:[Object(a.jsx)("button",{type:"button",className:"btn btn-outline-light",onClick:function(){return l(!r)},children:"Login"}),r?m:null]})})};var o=function(e){var t=e.user,n=e.handleDeleteProfile,s=e.setUser,r=Object(c.useState)(!0),l=Object(i.a)(r,2),o=l[0],u=l[1],j=Object(c.useState)(!1),b=Object(i.a)(j,2),d=b[0],h=b[1],O=Object(c.useState)(t&&t.username),f=Object(i.a)(O,2),m=f[0],x=f[1],p=Object(c.useState)(t&&t.name),v=Object(i.a)(p,2),g=v[0],N=v[1],y=Object(c.useState)(t&&t.age),S=Object(i.a)(y,2),C=S[0],P=S[1],k=Object(c.useState)(t&&t.location),E=Object(i.a)(k,2),w=E[0],M=E[1],_=Object(c.useState)(t&&t.photo),T=Object(i.a)(_,2),D=T[0],L=T[1],U=Object(c.useState)(t&&t.bio),B=Object(i.a)(U,2),J=B[0],A=B[1];function F(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return s(e)}))})),t&&(x(t.username),N(t.name),P(t.age),M(t.location),L(t.photo),A(t.bio))}Object(c.useEffect)((function(){F()}),[]);var H=Object(a.jsxs)("div",{className:"clear",children:[Object(a.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),fetch("/users/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,name:g,age:C,location:w,photo:D,bio:J})}).then((function(e){return e.json()})).then((function(e){e.errors?e.errors.forEach((function(e){return"Age must be greater than or equal to 18"===e?alert("Must be 18 or older"):alert(e)})):(h(!1),x(""),N(""),P(""),M(""),L(""),A(""),alert("Profile Successfully Updated!"),F())}))}(e)},children:[Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("label",{children:" Username "})," ",Object(a.jsx)("br",{children:" "})," ",Object(a.jsx)("input",{type:"text",value:m,onChange:function(e){return x(e.target.value)},placeholder:"username"})]})," ",Object(a.jsx)("label",{children:" Name "})," ",Object(a.jsx)("br",{children:" "})," ",Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:g,onChange:function(e){return N(e.target.value)},placeholder:"name"})})," ",Object(a.jsx)("label",{children:" Age "})," ",Object(a.jsx)("br",{children:" "})," ",Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:C,onChange:function(e){return P(e.target.value)},placeholder:"age"})})," ",Object(a.jsx)("label",{children:" Location "})," ",Object(a.jsx)("br",{children:" "})," ",Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:w,onChange:function(e){return M(e.target.value)},placeholder:"location"})})," ",Object(a.jsx)("label",{children:" Photo "})," ",Object(a.jsx)("br",{children:" "})," ",Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:D,onChange:function(e){return L(e.target.value)},placeholder:"photo"})})," ",Object(a.jsx)("label",{children:" Bio "})," ",Object(a.jsx)("br",{children:" "})," ",Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:J,onChange:function(e){return A(e.target.value)},placeholder:"bio"})})," ",Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)("input",{type:"submit",className:"btn btn-outline-light",children:" "})," "]})]})," "]});return Object(a.jsxs)("div",{className:"clear",children:[Object(a.jsxs)("div",{className:"position-absolute top-50 start-50 translate-middle",children:[" ",t&&!d?Object(a.jsxs)("div",{className:"card",style:{width:"20rem"},children:[Object(a.jsxs)("div",{className:"card-header",children:[" ",Object(a.jsx)("h3",{children:" My Profile "})]}),Object(a.jsx)("img",{alt:"",style:{width:"10rem"},src:t.photo})," ",Object(a.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(a.jsxs)("h4",{className:"list-group-item",children:[" Name : ",t.name," "]})," ",Object(a.jsxs)("h4",{className:"list-group-item",children:[" Age: ",t.age," "]})," ",Object(a.jsxs)("h4",{className:"list-group-item",children:[" Location: ",t.location," "]})," ",Object(a.jsxs)("h4",{className:"list-group-item",children:[" Email: ",t.email," "]})," ",Object(a.jsxs)("h4",{className:"list-group-item",children:[" Bio: ",t.bio," "]})]}),o?null:Object(a.jsx)("button",{type:"button",className:"btn btn-outline-danger",style:{width:"10rem"},onClick:function(){return u(!0),n(),void alert("Profile has been Deleted")},children:" Confirm Delete Profile ? "})," ",o?Object(a.jsx)("button",{className:"btn btn-outline-danger",style:{width:"10rem"},onClick:function(){return u(!1)},children:" Delete Profile "}):null," "]}):null," ",d?H:null," ",Object(a.jsxs)("button",{className:"btn btn-outline-secondary",onClick:function(){return F(),void h(!d)},children:[" ",d?"Cancel Edit":"Edit Profile"," "]})," "]})," "]})};var u=function(e){e.login;var t=Object(c.useState)(!1),n=Object(i.a)(t,2),s=n[0],r=n[1],l=Object(c.useState)(""),o=Object(i.a)(l,2),u=o[0],j=o[1],b=Object(c.useState)(""),d=Object(i.a)(b,2),h=d[0],O=d[1],f=Object(c.useState)(""),m=Object(i.a)(f,2),x=m[0],p=m[1],v=Object(c.useState)(""),g=Object(i.a)(v,2),N=g[0],y=g[1],S=Object(c.useState)(""),C=Object(i.a)(S,2),P=C[0],k=C[1],E=Object(c.useState)(""),w=Object(i.a)(E,2),M=w[0],_=w[1],T=Object(c.useState)(""),D=Object(i.a)(T,2),L=D[0],U=D[1],B=Object(c.useState)(""),J=Object(i.a)(B,2),A=J[0],F=J[1],H=Object(c.useState)(""),I=Object(i.a)(H,2),Y=I[0],q=I[1],R=Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,password:h,passwordConfirmation:x,name:N,age:P,email:M,location:L,photo:A,bio:Y})}).then((function(e){return e.json()})).then((function(e){e.errors?e.errors.forEach((function(e){return"Age must be greater than or equal to 18"===e?alert("Must be 18 or older"):alert(e)})):(r(!1),j(""),O(""),p(""),y(""),k(""),_(""),U(""),F(""),q(""),alert("Profile Successfully Created! Please Log In."))}))},children:[Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:u,onChange:function(e){return j(e.target.value)},placeholder:"username"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:h,onChange:function(e){return O(e.target.value)},placeholder:"password"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:x,onChange:function(e){return p(e.target.value)},placeholder:"password confirmation"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:N,onChange:function(e){return y(e.target.value)},placeholder:"name"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:P,onChange:function(e){return k(e.target.value)},placeholder:"age"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:M,onChange:function(e){return _(e.target.value)},placeholder:"email"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:L,onChange:function(e){return U(e.target.value)},placeholder:"location"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:A,onChange:function(e){return F(e.target.value)},placeholder:"photo"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"text",value:Y,onChange:function(e){return q(e.target.value)},placeholder:"bio"})}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("input",{type:"submit",className:"btn btn-outline-light"})})]})});return Object(a.jsx)("div",{children:Object(a.jsxs)("nav",{children:[Object(a.jsx)("button",{type:"button",className:"btn btn-outline-light",onClick:function(){return r(!s)},children:"Signup"}),s?R:null]})})};var j=function(e){var t=e.handleLogout;return Object(a.jsxs)("header",{children:[Object(a.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:t,children:" Logout "})," "]})};var b=function(e){var t=e.currentProfile,n=e.user,c=(e.profiles,e.setProfiles,e.handleDeleteUser),s=e.getMatches,r=t[Math.floor(Math.random()*t.length)];return Object(a.jsx)("div",{className:"clear",children:Object(a.jsx)("div",{className:"position-relative m-4",children:Object(a.jsxs)("div",{id:"profileCard",className:"card",style:{width:"18rem"},children:[Object(a.jsx)("img",{alt:"",className:"card-img-top",src:r&&r.photo}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h2",{children:r?Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{className:"card-title",children:r.name}),Object(a.jsx)("h5",{className:"card-subtitle mb-2 text-muted",children:r.age}),Object(a.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:r.location}),Object(a.jsx)("h6",{className:"card-text",children:r.bio})]}):null}),0===t.length?null:Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){return function(e){var t=n.id,s=e.id;c(s),fetch("/dislikedProfile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,disliked_person_id:s})}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}(r)},children:"Dislike"}),Object(a.jsx)("button",{type:"button",className:"btn btn-outline-success",onClick:function(){return function(e){var t=n.id,r=e.id;c(r),fetch("/likeProfile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t,liked_person_id:r})}).then((function(e){return e.json()})).then((function(){return s()}))}(r)},children:"Like"})]}),0===t.length?Object(a.jsx)("div",{className:"nobody",children:"Nobody left to swipe!"}):null]})]})})})};var d=function(e){var t=e.profiles,n=e.handleDeleteUser,s=e.setProfiles,r=e.setUser,i=e.user,l=e.getMatches;e.setMatches,Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return r(e)}))}))}),[]);var o=[];o=t&&t.filter((function(e){return e.id!==i.id}));var u=[],j=[],d=i.likes;d.forEach((function(e){return e.disliked_person_id?j.push(e.disliked_person_id):null})),d.forEach((function(e){return e.liked_person_id?u.push(e.liked_person_id):null}));var h=[].concat(u,j),O=o.filter((function(e){return!h.includes(e.id)}));return Object(a.jsx)("div",{children:Object(a.jsx)("div",{id:"swipe-card",children:Object(a.jsx)(b,{getMatches:l,currentProfile:O,user:i,profiles:t,handleDeleteUser:n,setProfiles:s})})})},h=n(6);var O=function(e){var t=e.user,n=e.matches;return Object(a.jsx)("div",{id:"nav",children:t?Object(a.jsxs)("div",{children:[Object(a.jsx)(h.b,{to:"/",exact:!0,children:Object(a.jsx)("button",{type:"button",className:"btn btn-outline-light",children:"Home Page"})}),Object(a.jsx)(h.b,{to:"/matches",exact:!0,children:Object(a.jsxs)("button",{type:"button",className:"btn btn-outline-light",children:["Matches (",n.length,")"]})}),Object(a.jsx)(h.b,{to:"/myProfile",exact:!0,children:Object(a.jsx)("button",{type:"button",className:"btn btn-outline-light",children:"My Profile"})})]}):null})},f=n(17);var m=function(e){var t=e.user,n=e.match,s=e.profiles,r=e.setMatches,l=e.matches,o=e.setProfiles,u=Object(c.useState)(!0),j=Object(i.a)(u,2),b=j[0],d=j[1],h=Object(c.useState)(""),O=Object(i.a)(h,2),m=O[0],x=O[1],p=Object(c.useState)(!1),v=Object(i.a)(p,2),g=v[0],N=v[1],y=Object(c.useState)(n.messages),S=Object(i.a)(y,2),C=S[0],P=S[1];console.log(n),Object(c.useEffect)((function(){fetch("/users").then((function(e){return e.json()})).then((function(e){return o(e)}))}),[]);var k=[];t&&(k=s&&s.filter((function(e){return e.id!==t.id})));var E=k&&k.filter((function(e){return e.id===n.like.user_id||e.id===n.like.liked_person_id})),w=E&&E[0],M=Object(a.jsx)("div",{className:"clear",children:Object(a.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),fetch("/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversation_id:n.conversations[0].id,message:m,user_id:t.id})}).then((function(e){return e.json()})).then((function(e){return P([].concat(Object(f.a)(C),[e]))})),x("")}(e)},children:[Object(a.jsx)("input",{type:"text",value:m,onChange:function(e){return x(e.target.value)},placeholder:"Type your chat here"}),Object(a.jsx)("input",{type:"submit",className:"btn btn-outline-secondary"})]})}),_=C.map((function(e){return Object(a.jsxs)("p",{children:[e.user_id===t.id?"me":w&&w.name,": ",e.message]},e.id)}));return Object(a.jsx)("div",{className:"clear",children:Object(a.jsxs)("div",{className:"card text-center",style:{width:"90rem"},children:[w?Object(a.jsxs)("div",{children:[Object(a.jsxs)("h3",{className:"card-header",children:["You matched with ",w.name,"!"]}),g?Object(a.jsx)("img",{alt:"",id:"profile_photo",width:"200px",src:w.photo}):null,Object(a.jsx)("br",{}),0===n.messages.length&&g?Object(a.jsx)("p",{children:"No messages yet! Start a conversation!"}):null,Object(a.jsx)("div",{className:"chat",children:Object(a.jsxs)("div",{className:"card text-dark bg-light mb-3",style:{width:"18rem"},children:[g?_:null,g?M:null]})}),Object(a.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){return N(!g)},children:g?"Close Messages":"Open Messages"}),b?Object(a.jsx)("button",{className:"btn btn-outline-secondary",onClick:function(){return d(!1)},children:"Unmatch"}):null,b?null:Object(a.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){fetch("/matches/".concat(n.id),{method:"DELETE"}).then((function(){return d(!0)})).then((function(){var e=l.filter((function(e){return e.id!==n.id}));r(e),alert("You have unmatched")}))},children:"Confirm Unmatch?"})]}):null,Object(a.jsx)("br",{})]})})};var x=function(e){var t=e.user,n=e.setUser,s=e.matches,r=e.setMatches,i=e.profiles,l=e.setProfiles;Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return n(e)}))}))}),[]),Object(c.useEffect)((function(){fetch("/getMatches").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]);var o=[];return 0!==s.length&&t&&(o=s.map((function(e){return Object(a.jsx)(m,{setProfiles:l,setMatches:r,matches:s,user:t,profiles:i,match:e},e.id)}))),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"match-container",children:0===s.length?Object(a.jsx)("h3",{children:"No Matches Yet!"}):null}),o,Object(a.jsx)("br",{})]})},p=n(3);var v=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),b=Object(i.a)(r,2),h=b[0],f=b[1],m=Object(c.useState)([]),v=Object(i.a)(m,2),g=v[0],N=v[1],y=Object(p.f)(),S=function(){console.log("Reroute!"),y.push("/")};return Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return s(e)}))}))}),[]),Object(c.useEffect)((function(){fetch("/users").then((function(e){return e.json()})).then((function(e){return f(e)}))}),[n]),Object(c.useEffect)((function(){fetch("/getMatches").then((function(e){return e.json()})).then((function(e){return N(e)}))}),[n]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{className:"sidenav",children:Object(a.jsxs)("div",{className:"sidenav-content",children:[Object(a.jsx)(O,{matches:g,user:n}),n?null:Object(a.jsx)(u,{onLogin:s,login:function(e,t){fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).then((function(e){return n.username?s(e):null}))}}),Object(a.jsx)("nav",{className:"nav-container",children:n?Object(a.jsx)(j,{handleLogout:function(){fetch("/logout",{method:"DELETE"}).then((function(){return s()})).then((function(){return S()}))}}):Object(a.jsx)(l,{onLogin:s})})]})}),Object(a.jsxs)(p.c,{children:[Object(a.jsxs)(p.a,{exact:!0,path:"/",children:[n?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"welcomeBanner3",children:[" Hi ",n.name,"!"]}),Object(a.jsx)("div",{className:"welcomeBanner2",children:" Ready to find love?"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"welcomeBanner",children:" Love is Waiting"})," ",Object(a.jsx)("div",{className:"welcomeBanner2",children:"Login to Begin"})]}),n&&h?Object(a.jsx)(d,{getMatches:function(){fetch("/getMatches").then((function(e){return e.json()})).then((function(e){return N(e)}))},setMatches:N,setUser:s,handleDeleteUser:function(e){var t=h.filter((function(t){return t.id!==e}));f(t)},profiles:h,setProfiles:f,user:n}):null]}),Object(a.jsx)(p.a,{exact:!0,path:"/matches",children:Object(a.jsx)(x,{matches:g,setMatches:N,user:n,setUser:s,profiles:h,setProfiles:f})}),Object(a.jsx)(p.a,{exact:!0,path:"/myProfile",children:Object(a.jsx)(o,{user:n,setUser:s,handleDeleteProfile:function(){fetch("/users/".concat(n.id),{method:"DELETE"}).then((function(){return s()})).then((function(){return S()}))}})})]})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),r(e),i(e)}))};r.a.render(Object(a.jsx)(h.a,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),g()}},[[32,1,2]]]);
//# sourceMappingURL=main.358aaa04.chunk.js.map